{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n});\n\nexport const refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  gallery: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.js-loader'),\n  loadMoreBtn: document.querySelector('.js-load-more-button'),\n};\n\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\nexport function showButton() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\nexport function hideButton() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n\nexport function renderPictures(hits) {\n  return hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\" \n            alt=\"${tags}\" \n            width=\"360\"\n            height=\"152\" \n          />\n        </a>\n        <div class=\"discribe-box\">\n          <ul class=\"discribe-list\">\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Likes</h2>\n              <p class=\"discribe-text\">${likes}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Views</h2>\n              <p class=\"discribe-text\">${views}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Comments</h2>\n              <p class=\"discribe-text\">${comments}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Downloads</h2>\n              <p class=\"discribe-text\">${downloads}</p>\n            </li>\n          </ul>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n}\n\nexport function scrollGalerryCard() {\n  const galleryCardHeight = document\n    .querySelector('.gallery-card')\n    .getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: Math.ceil(galleryCardHeight * 2),\n    left: Math.ceil(galleryCardHeight * 2),\n    behavior: 'smooth',\n  });\n}\n","import axios from 'axios';\n\nexport const searchParams = {\n  key: '46019224-0ece95bdc3a0496b8437567d7',\n  q: '',\n  imageType: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n};\n\nexport async function getPictures() {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: searchParams,\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  lightbox,\n  refs,\n  renderPictures,\n  showLoader,\n  hideLoader,\n  showButton,\n  hideButton,\n  scrollGalerryCard,\n} from './js/render-functions';\nimport { searchParams, getPictures } from './js/pixabay-api';\n\nhideLoader();\nhideButton();\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  refs.gallery.innerHTML = '';\n  searchParams.page = 1;\n\n  const form = event.currentTarget;\n  searchParams.q = form.elements.searchtext.value.trim();\n\n  if (searchParams.q === '') {\n    noRequestError();\n    hideButton();\n    return;\n  }\n\n  showLoader();\n\n  try {\n    const { totalHits, hits } = await getPictures();\n\n    hideLoader();\n    searchParams.maxPage = Math.ceil(totalHits / searchParams.per_page);\n    refs.gallery.insertAdjacentHTML('beforeend', renderPictures(hits));\n    lightbox.refresh();\n\n    if (hits.length > 0 && hits.length !== totalHits) {\n      showButton();\n      refs.loadMoreBtn.addEventListener('click', handlerLoadMore);\n    } else if (hits.length <= searchParams.per_page && hits.length > 0) {\n      endSearchMessage();\n      hideButton();\n    } else if (hits.length === 0) {\n      noImagesError();\n      hideButton();\n    }\n  } catch (error) {\n    noImagesError;\n  } finally {\n    refs.searchForm.reset();\n  }\n}\n\nasync function handlerLoadMore() {\n  searchParams.page += 1;\n\n  hideButton();\n  showLoader();\n\n  try {\n    const { hits } = await getPictures();\n\n    showButton();\n    hideLoader();\n\n    refs.gallery.insertAdjacentHTML('beforeend', renderPictures(hits));\n    lightbox.refresh();\n    scrollGalerryCard();\n  } catch (error) {\n    noImagesError;\n  } finally {\n    if (searchParams.page === searchParams.maxPage) {\n      hideButton();\n      endSearchMessage();\n      refs.loadMoreBtn.removeEventListener('click', handlerLoadMore);\n    }\n  }\n}\n\nfunction noImagesError() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'center',\n  });\n}\n\nfunction noRequestError() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Please write your request in the input field!',\n    position: 'topRight',\n  });\n}\n\nfunction endSearchMessage() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n"],"names":["lightbox","SimpleLightbox","refs","showLoader","hideLoader","showButton","hideButton","renderPictures","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","scrollGalerryCard","galleryCardHeight","searchParams","getPictures","axios","onSearch","event","form","noRequestError","totalHits","handlerLoadMore","endSearchMessage","noImagesError","iziToast"],"mappings":"owBAGO,MAAMA,EAAW,IAAIC,EAAe,aAAc,CACvD,aAAc,IACd,gBAAiB,SACjB,aAAc,KAChB,CAAC,EAEYC,EAAO,CAClB,WAAY,SAAS,cAAc,iBAAiB,EACpD,QAAS,SAAS,cAAc,aAAa,EAC7C,OAAQ,SAAS,cAAc,YAAY,EAC3C,YAAa,SAAS,cAAc,sBAAsB,CAC5D,EAEO,SAASC,GAAa,CAC3BD,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CACO,SAASE,GAAa,CAC3BF,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CACO,SAASG,GAAa,CAC3BH,EAAK,YAAY,UAAU,OAAO,WAAW,CAC/C,CACO,SAASI,GAAa,CAC3BJ,EAAK,YAAY,UAAU,IAAI,WAAW,CAC5C,CAEO,SAASK,EAAeC,EAAM,CACnC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,wCAE4BL,CAAa;AAAA;AAAA;AAAA,mBAGlCD,CAAY;AAAA,mBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCASkBC,CAAK;AAAA;AAAA;AAAA;AAAA,yCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,yCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,yCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAM7C,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,GAAoB,CAClC,MAAMC,EAAoB,SACvB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAE3B,OAAO,SAAS,CACd,IAAK,KAAK,KAAKA,EAAoB,CAAC,EACpC,KAAM,KAAK,KAAKA,EAAoB,CAAC,EACrC,SAAU,QACd,CAAG,CACH,CCrFO,MAAMC,EAAe,CAC1B,IAAK,qCACL,EAAG,GACH,UAAW,QACX,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAU,GACV,QAAS,CACX,EAEO,eAAeC,GAAc,CAIlC,OAHiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQF,CACZ,CAAG,GACe,IAClB,CCHAd,IACAE,IAEAJ,EAAK,WAAW,iBAAiB,SAAUmB,CAAQ,EAEnD,eAAeA,EAASC,EAAO,CAC7BA,EAAM,eAAc,EAEpBpB,EAAK,QAAQ,UAAY,GACzBgB,EAAa,KAAO,EAEpB,MAAMK,EAAOD,EAAM,cAGnB,GAFAJ,EAAa,EAAIK,EAAK,SAAS,WAAW,MAAM,OAE5CL,EAAa,IAAM,GAAI,CACzBM,IACAlB,IACA,MACD,CAEDH,IAEA,GAAI,CACF,KAAM,CAAE,UAAAsB,EAAW,KAAAjB,GAAS,MAAMW,EAAW,EAE7Cf,IACAc,EAAa,QAAU,KAAK,KAAKO,EAAYP,EAAa,QAAQ,EAClEhB,EAAK,QAAQ,mBAAmB,YAAaK,EAAeC,CAAI,CAAC,EACjER,EAAS,QAAO,EAEZQ,EAAK,OAAS,GAAKA,EAAK,SAAWiB,GACrCpB,IACAH,EAAK,YAAY,iBAAiB,QAASwB,CAAe,GACjDlB,EAAK,QAAUU,EAAa,UAAYV,EAAK,OAAS,GAC/DmB,IACArB,KACSE,EAAK,SAAW,IACzBoB,IACAtB,IAEH,MAAe,CAElB,QAAY,CACRJ,EAAK,WAAW,OACjB,CACH,CAEA,eAAewB,GAAkB,CAC/BR,EAAa,MAAQ,EAErBZ,IACAH,IAEA,GAAI,CACF,KAAM,CAAE,KAAAK,CAAI,EAAK,MAAMW,IAEvBd,IACAD,IAEAF,EAAK,QAAQ,mBAAmB,YAAaK,EAAeC,CAAI,CAAC,EACjER,EAAS,QAAO,EAChBgB,GACD,MAAe,CAElB,QAAY,CACJE,EAAa,OAASA,EAAa,UACrCZ,IACAqB,IACAzB,EAAK,YAAY,oBAAoB,QAASwB,CAAe,EAEhE,CACH,CAEA,SAASE,GAAgB,CACvBC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,QACd,CAAG,CACH,CAEA,SAASL,GAAiB,CACxBK,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gDACT,SAAU,UACd,CAAG,CACH,CAEA,SAASF,GAAmB,CAC1BE,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACd,CAAG,CACH"}